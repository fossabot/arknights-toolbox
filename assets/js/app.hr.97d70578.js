(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.hr"],{"072a":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("5530"),r=(a("07ac"),a("60bb")),n=a.n(r),i=a("6a80"),o=n.a.mapValues(i,(function(t,e){return Object(s["a"])({name:e},t)}));Object.values(o);e["b"]={characterTable:o,characterList:Object.values(o)}},"0e9a":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("4de4"),a("a630"),a("3ca3"),a("caad"),a("2532"),a("2ca0");var s=function(t,e){return null!==e&&void 0!==e&&e.length?Array.from(t).filter((function(t){var a=t.type;return e.includes(a)})):Array.from(t).filter((function(t){var e=t.type;return e.startsWith("image/")}))}},"0f8f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-hr"}},[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-xs-12"},[a("div",{class:!!t.$root.smallScreen&&"mdui-drawer mdui-drawer-right mdui-drawer-close",attrs:{id:"drawer"}},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.stars")))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.allStar?t.color.selected:t.color.notSelected,expression:"allStar ? color.selected : color.notSelected"}],staticClass:"mdui-btn mdui-btn-dense mdui-ripple tag-btn flex-full",on:{click:function(e){t.selected.star=t.$_.fill(Array(t.selected.star.length),!t.allStar)}}},[t._v(t._s(t.$t("common.selectAllShorten")))]),t._l(6,(function(e){return a("tag-button",{directives:[{name:"show",rawName:"v-show",value:!(6-e<2&&t.setting.hide12),expression:"!(6 - i < 2 && setting.hide12)"}],key:"star-"+(7-e),staticClass:"flex-equally",attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[7-e]},model:{value:t.selected.star[6-e],callback:function(a){t.$set(t.selected.star,6-e,a)},expression:"selected.star[6 - i]"}},[t._v(t._s(7-e)+"★")])}))],2)]),t._l(t.tagList.sort,(function(e){return a("tr",{key:e},[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("hr.tagType."+e)))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},t._l(t.tagList[e],(function(s){return a("tag-button",{key:e+"-"+s,class:{"opacity-5":t.setting.showGuarantees&&!t.guaranteesTagSet.has(s)},attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color.selected},model:{value:t.selected.tag[s],callback:function(e){t.$set(t.selected.tag,s,e)},expression:"selected.tag[tag]"}},[t._v(t._s(t.$t("tag."+s)))])})),1)])})),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.setting")))])]),a("td",[t._l(t.settingList,(function(e){return a("mdui-switch",{key:e,model:{value:t.setting[e],callback:function(a){t.$set(t.setting,e,a)},expression:"setting[key]"}},[t._v(t._s(t.$t("hr.setting."+e)))])})),t.$root.serverNotZH?a("mdui-switch",{staticClass:"mdui-m-r-2",model:{value:t.setting.showNotImplemented,callback:function(e){t.$set(t.setting,"showNotImplemented",e)},expression:"setting.showNotImplemented"}},[t._v(t._s(t.$t("hr.setting.showNotImplemented")))]):t._e()],2)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.option")))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.redBtn,expression:"$root.color.redBtn"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn",on:{click:t.reset}},[t._v(t._s(t.$t("common.reset")))]),a("label",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-purple","mdui-color-purple-a100 mdui-ripple-black"],expression:"[\n                    'mdui-color-purple',\n                    'mdui-color-purple-a100 mdui-ripple-black',\n                  ]"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn btn-group-left",attrs:{for:"image-select","mdui-tooltip":"{content:'"+t.$t("hr.ocr.tip")+"',position:'top'}"},on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),function(e){return t.handleFilesOCR(e.dataTransfer.files)}.apply(null,arguments)}}},[t._v(t._s(t.$t("hr.ocr.button"))+" ("+t._s(t.$root.server.toUpperCase())+")")]),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",id:"image-select",accept:"image/*"},on:{change:function(e){var a=e.target;t.handleFilesOCR(a.files),a.value=""}}}),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-purple","mdui-color-purple-a100 mdui-ripple-black"],expression:"[\n                    'mdui-color-purple',\n                    'mdui-color-purple-a100 mdui-ripple-black',\n                  ]"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn btn-group-right no-grow",on:{click:function(e){return t.$refs.apikeyDialog.open()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("settings")])])])])],2)])])])]),t.isTagsSelected(["高级资深干员","资深干员","支援机械"])?a("div",{staticClass:"mdui-chip-group",class:t.$root.smallScreen?"mdui-m-b-1":"mdui-m-t-4"},[t.isTagsSelected(["高级资深干员","资深干员"])?a("div",{staticClass:"mdui-chip"},[t._m(0),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v(t._s(t.$t("hr.tip.rare")))])]):t._e(),t.isTagsSelected("支援机械")?a("div",{staticClass:"mdui-chip"},[t._m(1),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v(t._s(t.$t("hr.tip.robot")))])]):t._e()]):t._e(),a("div",{staticClass:"mdui-row",class:{"mdui-m-t-4":!t.$root.smallScreen}},[a("div",{staticClass:"mdui-col-xs-12"},[t.$root.smallScreen?a("div",{staticClass:"comb-small"},[a("table",{staticClass:"mdui-table comb-table mdui-shadow-0 no-border bg-transparent hide-last-tr-border"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("hr.table.header.tag")))]),a("th",[t._v(t._s(t.$t("hr.table.header.possibility")))])])]),a("tbody",[t._l(t.displayCombinations,(function(e,s){return[a("tr",{key:"comb-"+s+"-tr1"},[a("td",{staticClass:"mdui-p-b-0 no-border",attrs:{colspan:"2"}},[t._l(e.tags,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.selected,expression:"color.selected"}],key:"comb-"+s+"-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),a("div",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.text[e.min],expression:"color.text[comb.min]"}],staticClass:"mdui-btn-bold no-sl no-pe mdui-float-right min-star"},[t._v(t._s(e.min)+"★")])],2)]),a("tr",{key:"comb-"+s+"-tr2"},[a("td",{attrs:{colspan:"2"}},t._l(e.chars,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.star],expression:"color[char.star]"}],key:"comb-"+s+"-"+e.name,staticClass:"mdui-btn mdui-btn-dense tag-btn",attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.isPub(e)?t._e():a("div",{staticClass:"tag-triangle right-top"}),t.isPubOnly(e)?a("div",{staticClass:"tag-triangle right-bottom"}):t._e(),t.setting.showAvatar?a("avatar",{staticClass:"tag-avatar no-pe",attrs:{name:e.name}}):t._e(),a("span",[t._v(t._s(t.$t("character."+e.name)))])],1)})),0)])]})),0==t.displayCombinations.length?a("tr",[a("td",{staticClass:"no-border",attrs:{colspan:"2"}},[t._v(t._s(t.$t("hr.table.selectTip")))])]):t._e()],2)])]):a("div",{staticClass:"comb-large"},[a("table",{staticClass:"mdui-table mdui-table-hoverable comb-table hide-last-tr-border"},[a("thead",[a("tr",{class:{"tbody-is-empty":!t.displayCombinations.length}},[a("th",{staticClass:"mdui-table-col-numeric",attrs:{width:"1"}},[t._v("#")]),a("th",{attrs:{width:"20%"}},[t._v(t._s(t.$t("hr.table.header.tag")))]),a("th",{staticClass:"mdui-text-center",attrs:{width:"1"}},[t._v(t._s(t.$t("hr.table.header.minRarity")))]),a("th",{attrs:{width:"80%"}},[t._v(t._s(t.$t("hr.table.header.possibility")))])])]),a("tbody",t._l(t.displayCombinations,(function(e,s){return a("tr",{key:"comb-"+s},[a("td",[t._v(t._s(s+1))]),a("td",t._l(e.tags,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.selected,expression:"color.selected"}],key:"comb-"+s+"-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),0),a("td",[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.min],expression:"color[comb.min]"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(e.min)+"★")])]),a("td",t._l(e.chars,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.star],expression:"color[char.star]"}],key:"comb-"+s+"-"+e.name,staticClass:"mdui-btn mdui-btn-dense tag-btn",attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.isPub(e)?t._e():a("div",{staticClass:"tag-triangle right-top"}),t.isPubOnly(e)?a("div",{staticClass:"tag-triangle right-bottom"}):t._e(),t.setting.showAvatar?a("avatar",{staticClass:"tag-avatar no-pe",attrs:{name:e.name}}):t._e(),a("span",[t._v(t._s(t.$t("character."+e.name)))])],1)})),0)])})),0)])])])]),a("mdui-dialog",{ref:"detailDialog",staticClass:"mdui-card",attrs:{id:"detail"}},[t.detail?a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("avatar",{key:"di-"+t.detail.name,staticClass:"mdui-card-header-avatar no-pe",attrs:{name:t.detail.name}}),a("div",{staticClass:"mdui-card-header-title mdui-m-t-1"},[a("span",[t._v(t._s(t.$t("character."+t.detail.name)))]),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[t.detail.star],expression:"color[detail.star]"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-y-0 mdui-m-l-1"},[t._v(t._s(t.detail.star)+"★")])]),a("div",{staticClass:"detail-tags mdui-m-t-1"},t._l([t.detail.profession,t.detail.position].concat(t.detail.tags),(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.selected.tag[e]?t.color.selected:t.color.notSelected,expression:"selected.tag[tag] ? color.selected : color.notSelected"}],key:"detail-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),0)],1):t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("a",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-teal","mdui-color-teal-300 mdui-ripple-black"],expression:"['mdui-color-teal', 'mdui-color-teal-300 mdui-ripple-black']"}],staticClass:"mdui-btn mdui-ripple",attrs:{href:t.$root.getWikiHref(t.detail),target:"_blank"}},[t._v(t._s(t.$t("common.viewOnWiki")))]),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-pink","mdui-color-indigo-a100 mdui-ripple-black"],expression:"['mdui-color-pink', 'mdui-color-indigo-a100 mdui-ripple-black']"}],staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-close":""}},[t._v(t._s(t.$t("common.close")))])])]),a("mdui-dialog",{ref:"apikeyDialog",staticClass:"mdui-typo",attrs:{id:"detail"}},[a("div",{staticClass:"mdui-dialog-title"},[t._v("OCR "+t._s(t.$t("common.setting")))]),a("div",{staticClass:"mdui-dialog-content mdui-p-b-0"},[a("div",{staticClass:"mdui-textfield mdui-p-t-0"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("OCR Space API Key")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.setting.ocrspaceApikey,expression:"setting.ocrspaceApikey",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text"},domProps:{value:t.setting.ocrspaceApikey},on:{input:function(e){e.target.composing||t.$set(t.setting,"ocrspaceApikey",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("i18n",{staticClass:"mdui-m-y-1",attrs:{path:"hr.ocr.setting.tip",tag:"div"}},[a("a",{attrs:{href:"https://ocr.space/",target:"_blank",rel:"noopener"}},[t._v("OCR Space")]),a("a",{attrs:{href:"https://ocr.space/OCRAPI",target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("hr.ocr.setting.applyLink")))])])],1),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.dialogTransparentBtn,expression:"$root.color.dialogTransparentBtn"}],staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])]),t.$root.smallScreen?a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.pinkBtn,expression:"$root.color.pinkBtn"}],staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-ripple",on:{click:function(e){t.drawer||(t.drawer=new t.$Drawer("#drawer")),t.drawer.toggle()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])}],n=a("1da1"),i=a("3835"),o=a("2909"),c=a("b85c"),l=a("ade3"),u=a("5530"),d=(a("96cf"),a("dca8"),a("cb29"),a("d81d"),a("5db7"),a("73d9"),a("caad"),a("2532"),a("b64b"),a("a9e3"),a("b0c0"),a("4de4"),a("99af"),a("6062"),a("d3b7"),a("3ca3"),a("ddb0"),a("2ca0"),a("a15b"),a("8a79"),a("1276"),a("ac1f"),a("5319"),a("4d63"),a("25f0"),a("498a"),a("159b"),a("a630"),a("d6cb"),a("60bb")),m=a.n(d),h=a("ab3e"),p=a("29d9"),g=a("f52e"),b=a("59c4"),v=a("5bda"),f={quality:.9,maxWidth:1920,maxHeight:1080,debug:!1,mimeType:"image/jpeg"},_=function(t,e){return new Promise((function(a,s){var r=Object(b["b"])(),n=new FileReader,i=Object.assign({},f,e);n.onload=function(t){r.src=t.target.result,r.onload=function(){try{var t=Object(v["a"])({img:r,config:i});a(t)}catch(e){s(e)}}};try{n.readAsDataURL(t)}catch(o){s(o)}}))},y=a("0e9a"),w=a("072a"),C=a("86c6"),$=a("60fe"),k=new p["a"]("hr"),x=m.a.mapValues(m.a.invert(C),parseInt);Object.freeze(x);var O=5,j={name:"arkn-hr",data:function(){var t;return Object(u["a"])(Object(u["a"])({showAll:!1},w["b"]),{},{hr:m.a.clone(w["b"].characterList).sort((function(t,e){return e.star-t.star})),tags:(t={},Object(l["a"])(t,x.资深干员,[]),Object(l["a"])(t,x.高级资深干员,[]),t),selected:{star:m.a.fill(Array(6),!0),tag:{}},setting:{showAvatar:!1,hide12:!1,showPrivate:!1,showNotImplemented:!1,showGuarantees:!1,ocrspaceApikey:""},settingList:["showAvatar","hide12","showPrivate","showGuarantees"],avgCharTag:0,tagList:{locations:[x.近战位,x.远程位],credentials:[x.高级资深干员,x.资深干员,x.新手,x.支援机械],professions:Array(8).fill(null).map((function(t,e){return e+1})),abilities:[],sort:["credentials","locations","professions","abilities"]},color:$["a"],detail:!1,drawer:!1,tagsCache:[]})},watch:{"selected.tag":{handler:function(){var t=m.a.flatMap(this.selected.tag,(function(t,e){return t?[e]:[]}));if(t.length>O){for(var e in new this.$alert(this.$tc("hr.tagOverLimit",O),null,null,{confirmText:this.$t("common.okay"),history:!1}),this.selected.tag)this.selected.tag[e]=this.tagsCache.includes(e);t=this.tagsCache}else this.tagsCache=t},deep:!0},setting:{handler:function(t){k.setItem("setting",t)},deep:!0}},computed:{allStar:function(){return m.a.sum(this.selected.star)==this.selected.star.length},combinations:function(){var t,e=this,a=Object.keys(m.a.pickBy(this.selected.tag)).map(Number),s=m.a.flatMap(this.selected.star,(function(t,e){return t?[e+1]:[]})),r=m.a.flatMap([1,2,3],(function(t){return m.a.combinations(a,t)})),n=[],i=Object(c["a"])(r);try{for(i.s();!(t=i.n()).done;){var o,l=t.value,u=[],d=Object(c["a"])(l);try{for(d.s();!(o=d.n()).done;){var h=o.value;u.push(this.tags[h])}}catch(f){d.e(f)}finally{d.f()}this.setting.showPrivate||u.push(this.pubs);var p=m.a.intersection.apply(m.a,u);if(l.includes(x.高级资深干员)||m.a.remove(p,(function(t){var e=t.star;return 6===e})),this.setting.showNotImplemented||m.a.remove(p,(function(t){var a=t.name;return!e.$root.isImplementedChar(a)})),0!=p.length){var g=m.a.filter(p,(function(t){var e=t.star;return e>=3}));0==g.length&&(g=p);var b=m.a.sumBy(g,(function(t){var e=t.star;return e}))/g.length-l.length/10-g.length/this.avgCharTag,v=m.a.minBy(g,(function(t){var a=t.recruitment,s=t.star;return e.isPub({recruitment:a})?s:1/0}));m.a.remove(p,(function(t){var e=t.star;return!s.includes(e)})),this.setting.hide12&&m.a.remove(p,(function(t){var e=t.star;return e<3})),0!=p.length&&n.push({tags:l,chars:p,min:v.star,score:b})}}}catch(f){i.e(f)}finally{i.f()}return n.sort((function(t,e){return t.min==e.min?e.score-t.score:e.min-t.min})),this.$emit("nm",n.some((function(t){var e=t.min;return e>=5}))),n},displayCombinations:function(){if(this.setting.showGuarantees){var t=Object.keys(m.a.pickBy(this.selected.tag)).map(Number);return t.length?this.guarantees.filter((function(e){var a=e.tags;return t.every((function(t){return a.includes(t)}))})):this.guarantees}return this.combinations},guarantees:function(){var t,e=this,a=[],s=m.a.flatMap([1,2,3],(function(t){return m.a.combinations([].concat(Object(o["a"])(e.tagList.professions),Object(o["a"])(e.tagList.abilities),Object(o["a"])(e.tagList.locations)),t)})),r=Object(c["a"])(s);try{var n=function(){var s,r=t.value,n=[e.pubs],i=Object(c["a"])(r);try{for(i.s();!(s=i.n()).done;){var o=s.value;n.push(e.tags[o])}}catch(d){i.e(d)}finally{i.f()}var l=m.a.intersection.apply(m.a,n).filter((function(t){var e=t.star;return 3<=e&&e<6}));if(0==l.length)return"continue";var u=m.a.min(l.map((function(t){var e=t.star;return e})));return u<4||a.some((function(t){var e=t.tags,a=t.min;return a===u&&e.every((function(t){return r.includes(t)}))}))?"continue":void a.push({tags:r,min:u,chars:l})};for(r.s();!(t=r.n()).done;)n()}catch(l){r.e(l)}finally{r.f()}return a.sort((function(t,e){for(var a=0,s=[["tags.length",1],["min",-1]];a<s.length;a++){var r=Object(i["a"])(s[a],2),n=r[0],o=r[1],c=o*(m.a.at(t,n)-m.a.at(e,n));if(0!=c)return c}return 0}))},guaranteesTagSet:function(){return new Set(m.a.flatMap(this.guarantees,"tags"))},pubs:function(){return this.hr.filter(this.isPub)},enumTag:function(){return m.a.mapValues(m.a.invert(this.$root.i18nServerMessages.tag),parseInt)}},methods:{reset:function(){for(var t in this.selected.star=m.a.fill(Array(this.selected.star.length),!0),this.selected.tag)this.selected.tag[t]=!1},showDetail:function(t){var e=this;this.detail=t,this.$nextTick((function(){return e.$refs.detailDialog.open()}))},isTagsSelected:function(t){var e=this;return m.a.castArray(t).some((function(t){return e.selected.tag[x[t]]}))},handleFilesOCR:function(t){if(this.$route.path.startsWith("/hr")){var e=Object(y["a"])(t);e.length&&(this.OCR(e[0]),this.$gtag.event("hr_ocr",{event_category:"hr",event_label:"ocr"}))}},OCR:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n,i,o,l,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={cn:"chs",tw:"cht",us:"eng",jp:"jpn",kr:"kor"},r=e.$snackbar(e.$t("hr.ocr.processing")),a.t0=h["a"],a.next=5,_(t,{quality:.9,maxWidth:1920,maxHeight:1080});case 5:return a.t1=a.sent,a.t2=s[e.$root.server],a.t3={file:a.t1,filetype:"jpg",language:a.t2},a.t4=e.setting.ocrspaceApikey,a.next=11,a.t0.ocrspace.call(a.t0,a.t3,a.t4).catch((function(t){return{IsErroredOnProcessing:!0,ErrorMessage:String(t)}}));case 11:if(n=a.sent,r.close(),!n.IsErroredOnProcessing){a.next=16;break}return e.$snackbar({message:"".concat(e.$t("hr.ocr.error")).concat(m.a.castArray(n.ErrorMessage).map((function(t){return t.endsWith(".")?t:"".concat(t,".")})).join(" ")),timeout:0,buttonText:e.$t("common.retry"),onButtonClick:function(){return e.OCR(t)}}),a.abrupt("return");case 16:e.reset(),i={"·":"","千员":"干员","滅速":"減速","枳械":"机械","冫口了":"治疗"},o=m.a.reduce(i,(function(t,e,a){return t.replace(new RegExp(a,"g"),e)}),n.ParsedResults[0].ParsedText.trim()).split(/[\r\n]+/),console.log("OCR",JSON.stringify(o)),l=0,u=Object(c["a"])(o),a.prev=22,u.s();case 24:if((d=u.n()).done){a.next=34;break}if(p=d.value,!p.length||!(p in e.enumTag)){a.next=32;break}if(l++,!(l>O)){a.next=31;break}return e.$snackbar({message:e.$tc("hr.ocr.tagOverLimit",O),timeout:0}),a.abrupt("return");case 31:e.selected.tag[e.enumTag[p]]=!0;case 32:a.next=24;break;case 34:a.next=39;break;case 36:a.prev=36,a.t5=a["catch"](22),u.e(a.t5);case 39:return a.prev=39,u.f(),a.finish(39);case 42:l!==O&&e.$snackbar({message:e.$tc("hr.ocr.tagNotEnough",O),timeout:0});case 43:case"end":return a.stop()}}),a,null,[[22,36,39,42]])})))()},isPub:function(t){var e=t.recruitment;return this.$root.server in e},isPubOnly:function(t){var e=t.recruitment;return 2===e[this.$root.server]}},created:function(){var t=this,e=new Set,a=0;this.hr.forEach((function(s){var r=s.tags,n=s.profession,i=s.position,c=s.star;switch(r.forEach((function(t){return e.add(t)})),c){case 5:t.tags[x.资深干员].push(s);break;case 6:t.tags[x.高级资深干员].push(s);break}for(var l=0,u=[].concat(Object(o["a"])(r),[n,i]);l<u.length;l++){var d=u[l];t.tags[d]||(t.tags[d]=[]),t.tags[d].push(s)}a+=r.length+2}));var s=m.a.size(this.tags);this.avgCharTag=a/s,e.delete(x.新手),e.delete(x.支援机械),this.tagList.abilities=Array.from(e).sort(),this.selected.tag=m.a.mapValues(this.tags,(function(){return!1})),function(e){e&&(t.setting=Object(g["a"])(t.setting,e))}(k.getItem("setting")),this.$root.$on("paste-files",this.handleFilesOCR)},beforeDestroy:function(){this.$root.$off("paste-files",this.handleFilesOCR)}},S=j,T=(a("ac61"),a("0c7c")),N=Object(T["a"])(S,s,r,!1,null,null,null);e["default"]=N.exports},"1c8a":function(t,e,a){},ab3e:function(t,e,a){"use strict";var s=a("1da1"),r=a("5530"),n=(a("96cf"),a("d3b7"),a("1276"),a("ac1f"),a("c579")),i=a.n(n),o=a("60bb"),c=a.n(o),l=a("e444"),u=i.a.JQ.ajax,d="https://jsonstorage.net",m=function(t){return new Promise((function(e,a){u(Object(r["a"])(Object(r["a"])({},t),{},{success:function(t){return e(t)},error:a}))}))};e["a"]={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m({method:"GET",url:t,dataType:e?"json":"text"})},tagOCR:function(t){var e=new FormData;return c.a.each(t,(function(t,a){return e.append(a,t)})),m({method:"POST",url:"/api/tagocr",processData:!1,data:e,dataType:"json",contentType:!1})},ocrspace:function(t,e){var a=new FormData;return c.a.each(t,(function(t,e){return a.append(e,t)})),m({method:"POST",url:"https://api.ocr.space/parse/image",processData:!1,data:a,dataType:"json",contentType:!1,headers:{apikey:e||"helloworld"}})},createJson:function(t){return m({method:"POST",url:"".concat(d,"/api/items"),processData:!1,data:JSON.stringify(t),dataType:"json",contentType:"application/json"}).then((function(t){var e=t.uri;return l["a"].encode(c.a.last(e.split("/")))}))},getJson:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m({method:"GET",url:"".concat(d,"/api/items/").concat(l["a"].decode(e)),dataType:"json",contentType:"application/json"}));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updateJson:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m({method:"PUT",url:"".concat(d,"/api/items/").concat(l["a"].decode(e)),processData:!1,data:JSON.stringify(a),dataType:"json",contentType:"application/json"}));case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()}},ac61:function(t,e,a){"use strict";a("1c8a")},e444:function(t,e,a){"use strict";(function(t){var s=a("2909"),r=(a("4d90"),a("fb6a"),a("5319"),a("ac1f"),a("d3b7"),a("25f0"),a("a15b"),a("d81d"),a("42a7")("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")),n="hex",i=32,o=[[0,8],[8,4],[12,4],[16,4],[20]],c=function(t,e){return t.slice(-e).padStart(e,"0")},l=function(e){var a=t.from(e.replace(/-/g,""),n);return r.encode(a)},u=function(e){var a=c(t.from(r.decode(e)).toString(n),i);return o.map((function(t){return a.substr.apply(a,Object(s["a"])(t))})).join("-")};e["a"]={encode:l,decode:u}}).call(this,a("b639").Buffer)}}]);