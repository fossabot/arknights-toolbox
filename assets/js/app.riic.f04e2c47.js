(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.riic"],{"072a":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("5530"),a=(i("07ac"),i("60bb")),s=i.n(a),l=i("6a80"),r=s.a.mapValues(l,(function(t,e){return Object(n["a"])({name:e},t)}));Object.values(r);e["b"]={characterTable:r,characterList:Object.values(r)}},2205:function(t,e,i){},"29bc":function(t,e,i){},"7df1":function(t,e,i){"use strict";i("2205")},"7eb2":function(t,e,i){},"91ae":function(t,e,i){"use strict";i("d370")},9701:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"arkn-riic"}},[i("div",{class:{"mdui-drawer mdui-drawer-right mdui-drawer-close":t.$root.smallScreen},attrs:{id:"drawer"}},[i("div",{attrs:{id:"filter-panel"}},[i("div",{staticClass:"mdui-row"},t._l(t.tagDisplay,(function(e,n){return i("div",{key:n,staticClass:"mdui-col-xs-12 tag-group-outside"},t._l(e,(function(e){return i("div",{key:e,staticClass:"tag-group mobile-screen-flex-box equally"},[i("label",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.textColor[e],expression:"textColor[tagType]"}],staticClass:"mdui-textfield-label flex-full"},[t._v(t._s("BUILDING"===e?t.$tt("riic.select."+e):t.$t("building.name."+e)))]),t._l(t.buff.numKey[e],(function(n,a){return i("tag-button",{key:e+"-"+a,class:{"opacity-5":t.selected&&!(t.selected[0]===e&&t.selected[1]===a)},attrs:{notSelectedColor:t.color[e]||t.color.selected,selectedColor:t.color[e]||t.color.selected,canChange:!1},on:{click:function(i){return t.toggleTag(e,a)}}},[t._v(t._s("BUILDING"===e?t.$t("building.name."+a):"TRAINING"===e&&"全能"!==a?t.$t("tag."+t.enumTag[a+"干员"]):t.$tt("riic.select."+a)))])}))],2)})),0)})),0),i("div",{staticClass:"mdui-row mdui-m-t-2"},[i("div",{staticClass:"mdui-col-xs-12",staticStyle:{"white-space":"normal"}},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.redBtn,expression:"$root.color.redBtn"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn mdui-m-r-2",on:{click:t.reset}},[t._v(t._s(t.$t("common.reset")))]),t._l(t.settingList,(function(e){return i("mdui-switch",{key:e,staticClass:"mdui-m-r-2",model:{value:t.setting[e],callback:function(i){t.$set(t.setting,e,i)},expression:"setting[key]"}},[t._v(t._s(t.$t("riic.setting."+e)))])})),t.$root.serverNotCN?i("mdui-switch",{staticClass:"mdui-m-r-2",model:{value:t.setting.showNotImplemented,callback:function(e){t.$set(t.setting,"showNotImplemented",e)},expression:"setting.showNotImplemented"}},[t._v(t._s(t.$t("riic.setting.showNotImplemented")))]):t._e()],2)]),i("div",{staticClass:"mdui-row"},[i("div",{staticClass:"\n            mdui-col-xs-12 mdui-textfield mdui-textfield-floating-label mdui-textfield-has-clear\n          ",attrs:{id:"name-filter"}},[i("label",{staticClass:"mdui-textfield-label mdui-text-truncate"},[t._v(t._s(t.$t("riic.searchPlaceholder")))]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.nameFilterInput,expression:"nameFilterInput",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text"},domProps:{value:t.nameFilterInput},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.nameFilterInput=""},input:function(e){e.target.composing||(t.nameFilterInput=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i("button",{staticClass:"\n              mdui-btn\n              mdui-btn-icon\n              mdui-ripple\n              mdui-btn-dense\n              mdui-textfield-floating-label-clear\n            ",on:{click:t.clearNameFilter}},[i("i",{staticClass:"mdui-icon material-icons"},[t._v("close")])])])])])]),i("div",{class:"mdui-row "+(t.$root.smallScreen?"":"mdui-m-t-4")},[i("div",{staticClass:"mdui-col-xs-12"},[i("div",{staticClass:"mdui-table-fluid"},[i("table",{staticClass:"mdui-table hide-last-tr-border",attrs:{id:"skill-table"}},[i("thead",[i("tr",[i("th",{staticClass:"mdui-text-center"},[t._v(t._s(t.$t("riic.table.header.operator")))]),i("th",{staticClass:"mdui-text-center"},[t._v(t._s(t.$t("riic.table.header.unlock")))]),i("th",{staticClass:"mdui-text-center mdui-hidden-sm-down"},[t._v(t._s(t.$t("riic.table.header.building")))]),i("th",{staticClass:"mdui-text-center"},[t._v(t._s(t.$t("riic.table.header.skill")))]),i("th",[t._v(t._s(t.$t("riic.table.header.buff")))])])]),i("tbody",{on:{click:t.handleRiicSkillClick}},t._l(t.displaySkills,(function(t){return i("skill-tr",{key:t.cid+"-"+t.id,attrs:{skill:t}})})),1)])])])]),t.$root.smallScreen?i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.pinkBtn,expression:"$root.color.pinkBtn"}],staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-ripple",on:{click:function(e){t.drawer||(t.drawer=new t.$Drawer("#drawer")),t.drawer.toggle()}}},[i("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):i("scroll-to-top"),i("term-dialog",{ref:"termDialog",on:{search:function(e){return t.reset(),t.setNameFilter(t.$t("term."+e+".name"))}}})],1)},a=[],s=i("5530"),l=i("2909"),r=i("b85c"),c=i("3835"),o=(i("dca8"),i("a4d3"),i("e01a"),i("d81d"),i("5319"),i("ac1f"),i("4de4"),i("b0c0"),i("99af"),i("841c"),i("5db7"),i("73d9"),i("e557")),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[t.skill.span?i("td",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:!t.loadedAvatar[t.skill.cid]&&t.getObserveOption((function(e){e&&(t.avatarVisible=!0,t.$set(t.loadedAvatar,t.skill.cid,!0))})),expression:"\n      !loadedAvatar[skill.cid] &&\n      getObserveOption(isVisible => {\n        if (!isVisible) return;\n        avatarVisible = true;\n        $set(loadedAvatar, skill.cid, true);\n      })\n    "}],staticClass:"mdui-ripple no-wrap lh-1",class:{"no-border":t.skill.spanNoBorder},attrs:{width:"1",rowspan:t.skill.span},on:{click:function(e){return t.goToWiki(t.skill.cid)}}},[i("div",{staticClass:"mdui-valign"},[i("avatar",{staticClass:"mdui-list-item-avatar mdui-m-a-0",attrs:{name:(t.avatarVisible||t.loadedAvatar[t.skill.cid])&&t.skill.cid}}),i("span",{staticClass:"mdui-m-l-1"},[t._v(t._s(t.$t("character."+t.skill.cid)))])],1)]):i("td",{staticClass:"hidden"}),i("td",{staticClass:"mdui-text-center no-wrap"},[t._v(t._s(t.$t("riic.table.unlock."+t.skill.unlock)))]),i("td",{staticClass:"mdui-text-center mdui-hidden-sm-down no-wrap"},[t._v(t._s(t.$t("building.name."+t.getInfoById(t.skill.id).building)))]),i("td",{staticClass:"mdui-text-center no-wrap"},[i("span",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[t.getInfoById(t.skill.id).building],expression:"color[getInfoById(skill.id).building]"}],staticClass:"skill-card"},[t._v(t._s(t.$t("building.buff.name."+t.skill.id)))])]),i("td",{staticClass:"mdui-typo",class:!!t.$root.smallScreen&&"no-wrap",domProps:{innerHTML:t._s(t.richText2HTML(t.$t("building.buff.description."+t.buff.description[t.skill.id])))}})])},u=[],m=i("072a"),f=i("0bbb"),p=i("60fe"),h=(i("2ca0"),i("f05a"),function(t){return t.replace(/^[^0-9a-zA-Z]/,"").replace(/[^0-9a-zA-Z]/g,"-")}),v=function(t){return t.replace(/^\W/,"").replace(/\W/g,"_")},b=function t(e){var i=e.replace(/<([^<>]+)>([^<>]+)<\/>/g,(function(t,e,i){return e.startsWith("@cc.")?'{{span class="riic-rt '.concat(h(e),'"}}').concat(i,"{{/span}}"):e.startsWith("$cc.")?'{{span class="riic-term" data-id="'.concat(v(e),'"}}').concat(i,"{{/span}}"):void 0})).replace(/\n/g,"<br />");return/<[^<>]+>[^<>]+<\/>/.test(i)?t(i):i.replace(/{{/g,"<").replace(/}}/g,">")},g=function t(e){var i=e.replace(/<(?:[^>]+)>([^<>]+)<\/>/g,"$1");return/<[^>]+>[^<>]+<\/>/.test(i)?t(i):i},k=function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},a=Object(r["a"])((null===(e=t.composedPath)||void 0===e?void 0:e.call(t))||[]);try{for(a.s();!(i=a.n()).done;){var s,l=i.value;if(n(l))return;if(null!==(s=l.classList)&&void 0!==s&&s.contains("riic-term"))return l}}catch(c){a.e(c)}finally{a.f()}},$=function(t){return{callback:t,once:!0,intersection:{rootMargin:"0px 0px 100% 0px"}}},w={},C={props:{skill:Object},data:function(){return{buff:f["a"],color:p["d"],avatarVisible:!1,loadedAvatar:w}},methods:{richText2HTML:b,getObserveOption:$,getInfoById:function(t){return f["a"].info[f["a"].description[t]]},goToWiki:function(t){var e=this,i=Object(s["a"])({name:t},m["a"][t]);this.$confirm(this.$t("riic.viewOnWiki"),this.$t("character.".concat(t)),(function(){return window.open(e.$root.getWikiHref(i),"_blank")}),(function(){}),{confirmText:this.$t("common.yes"),cancelText:this.$t("common.no"),history:!1})}}},_=C,x=(i("e113"),i("0c7c")),y=Object(x["a"])(_,d,u,!1,null,"46f6fb96",null),I=y.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mdui-dialog",{ref:"dialog",on:{closed:function(e){t.ids=[]}}},[i("div",{ref:"dialogContent",staticClass:"mdui-dialog-content mdui-typo mdui-p-y-0",on:{click:t.handleDialogClick}},t._l(t.ids,(function(e){return i("div",{key:e,ref:e,refInFor:!0,staticClass:"term-item"},[i("h4",{staticClass:"term-title"},[t._v(t._s(t.$t("term."+e+".name"))+" "),i("button",{staticClass:"mdui-btn mdui-btn-icon mdui-ripple",on:{click:function(i){return t.emitSearch(e)}}},[i("i",{staticClass:"mdui-icon material-icons"},[t._v("search")])])]),i("div",{staticClass:"term-desc",domProps:{innerHTML:t._s(t.richText2HTML(t.$t("term."+e+".desc")))}})])})),0),i("div",{staticClass:"mdui-dialog-actions"},[i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.dialogTransparentBtn,expression:"$root.color.dialogTransparentBtn"}],staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])])},T=[],O=(i("caad"),i("2532"),i("60bb")),F=i.n(O),S={data:function(){return{ids:[]}},methods:{richText2HTML:b,show:function(t){this.ids=F.a.castArray(t),this.$nextTick(this.$refs.dialog.open)},handleDialogClick:function(t){var e,i,n,a,s=this,l=k(t,(function(t){var e;return null===(e=t.classList)||void 0===e?void 0:e.contains("mdui-dialog-content")})),r=null===l||void 0===l||null===(e=l.dataset)||void 0===e?void 0:e.id;r&&(this.ids.includes(r)?null===(i=this.$refs[r])||void 0===i||null===(n=i[0])||void 0===n||null===(a=n.scrollIntoView)||void 0===a||a.call(n,{behavior:"smooth",block:"center"}):(this.ids.push(r),this.$nextTick((function(){s.$refs.dialog.handleUpdate();var t=s.$refs.dialogContent;t.scrollTop=t.scrollHeight}))))},emitSearch:function(t){this.$refs.dialog.close(),this.$emit("search",t)}}},j=S,D=(i("c504"),Object(x["a"])(j,N,T,!1,null,"f37702e2",null)),B=D.exports,L=i("29d9"),A=i("f52e"),E=i("86c6"),M=new L["a"]("riic"),R=F.a.mapValues(F.a.invert(E),parseInt);Object.freeze(R);var W=[["BUILDING"],["MANUFACTURE","TRADING","CONTROL","DORMITORY","MEETING","WORKSHOP","TRAINING"]],V=function(t){return f["a"].info[f["a"].description[t]]},G=function(t){return F.a.transform(t,(function(t,e){var i=e.id,n=V(i),a=n.num;F.a.each(a,(function(e,i){(!t[i]||t[i]<e)&&(t[i]=e)}))}),{})},H={name:"arkn-riic",components:{ScrollToTop:o["a"],SkillTr:I,TermDialog:B},data:function(){return{enumTag:R,buff:f["a"],characterTable:m["a"],color:p["d"],tagDisplay:W,setting:{hideIrrelevant:!1,showNotImplemented:!1},settingList:["hideIrrelevant"],drawer:null,selected:null,nameFilterInput:"",nameFilter:"",updateNameFilter:F.a.debounce((function(t){this.nameFilter=t}),500)}},watch:{setting:{handler:function(t){M.setItem("setting",t)},deep:!0},nameFilterInput:function(t){this.updateNameFilter(t),t||this.updateNameFilter.flush()}},computed:{textColor:function(){return F.a.mapValues(this.color,(function(t){return t.map((function(t){return t.replace(/mdui-color/g,"mdui-text-color")}))}))},display:function(){var t=this,e=F.a.transform(f["b"],(function(e,i,n){if(t.setting.showNotImplemented||t.$root.isImplementedChar(n))if(t.selected){var a=i.filter(t.isSkillRelevant);a.length>0&&(t.setting.hideIrrelevant?e.push({name:n,skills:a}):e.push({name:n,skills:i}))}else e.push({name:n,skills:i})}),[]).reverse();if(this.selected){var i=Object(c["a"])(this.selected,2),n=i[0],a=i[1],s=F.a.castArray(f["a"].numKey[n][a]);e.sort((function(t,e){var i,n=[G(t.skills),G(e.skills)],a=n[0],l=n[1],c=Object(r["a"])(s);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(a[o]||(a[o]=0),l[o]||(l[o]=0),0!==a[o]||0!==l[o])return l[o]-a[o]}}catch(d){c.e(d)}finally{c.f()}return t.name.localeCompare(e.name)}))}return e},displayWithNameFilter:function(){var t=this;if(!this.nameFilter)return this.display;var e=F.a.transform(this.display,(function(e,i){var n=t.nameFilter.replace(/ /g,""),a=i.skills.map((function(e){var i=e.id;return t.$t("building.buff.name.".concat(i))})),r=i.skills.map((function(e){var i=e.id;return g(t.$t("building.buff.description.".concat(f["a"].description[i])))})),c=[].concat(Object(l["a"])(t.$root.getSearchGroup(m["a"][i.name])),Object(l["a"])(a),Object(l["a"])(r)).map((function(t){return t.indexOf(n)+1||1/0}));c.some((function(t){return t!==1/0}))&&e.push(Object(s["a"])(Object(s["a"])({},i),{},{search:c,nl:t.$t("character.".concat(i.name)).length}))}),[]);return!this.selected&&e.length&&e.sort((function(t,e){for(var i=t.search,n=t.nl,a=e.search,s=e.nl,l=0;l<Math.min(i.length,a.length);l++){var r=i[l]-a[l];if(!F.a.isNaN(r))return r||n-s}return 0})),e},displaySkills:function(){var t=this;return F.a.flatMap(this.displayWithNameFilter,(function(e,i){return e.skills.map((function(n,a){return Object(s["a"])(Object(s["a"])({cid:e.name,index:a},n),{},{span:0===a?e.skills.length:0,spanNoBorder:i===t.displayWithNameFilter.length-1})}))}))}},methods:{reset:function(){this.selected=null},toggleTag:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];F.a.isEqual(this.selected,e)?this.selected=null:this.selected=e},setNameFilter:function(t){this.nameFilterInput=t,this.$$("#name-filter").addClass("mdui-textfield-not-empty")},clearNameFilter:function(){this.nameFilterInput="",this.$$("#name-filter").removeClass("mdui-textfield-not-empty")},isSkillRelevant:function(t){var e=t.id,i=Object(c["a"])(this.selected,2),n=i[0],a=i[1],s=V(e),l=s.building,r=s.is;return"BUILDING"===n?a===l:n===l&&a in r},handleRiicSkillClick:function(t){var e,i=k(t,(function(t){return"TD"===t.tagName})),n=null===i||void 0===i||null===(e=i.dataset)||void 0===e?void 0:e.id;n&&this.$refs.termDialog.show(n)}},created:function(){var t=this;(function(e){e&&(t.setting=Object(A["a"])(t.setting,e))})(M.getItem("setting"))}},U=H,P=(i("7df1"),Object(x["a"])(U,n,a,!1,null,null,null));e["default"]=P.exports},c504:function(t,e,i){"use strict";i("7eb2")},d370:function(t,e,i){},e113:function(t,e,i){"use strict";i("29bc")},e557:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.redBtn,expression:"$root.color.redBtn"}],staticClass:"mdui-fab mdui-fab-fixed mdui-ripple scroll-to-top",class:{"mdui-fab-hide":t.top<1e3},on:{click:t.scrollTop}},[i("i",{staticClass:"mdui-icon material-icons"},[t._v("vertical_align_top")])])},a=[],s=i("60bb"),l=i.n(s),r={name:"scroll-to-top",data:function(){return{top:0,handleScrollDebounce:function(){}}},methods:{scrollTop:function(){window.scroll({top:0,left:0,behavior:"smooth"})},handleScroll:function(){this.top=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},created:function(){this.handleScrollDebounce=l.a.debounce(this.handleScroll,100)},mounted:function(){window.addEventListener("scroll",this.handleScrollDebounce)},destroyed:function(){window.removeEventListener("scroll",this.handleScrollDebounce)}},c=r,o=(i("91ae"),i("0c7c")),d=Object(o["a"])(c,n,a,!1,null,"151fee56",null);e["a"]=d.exports},f05a:function(t,e,i){}}]);